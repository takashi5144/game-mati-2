<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ®µéšçš„è¨ºæ–­ãƒ†ã‚¹ãƒˆ</title>
    <style>
        body { 
            background: #1a1a1a; 
            color: #fff; 
            font-family: 'Courier New', monospace; 
            padding: 20px; 
            margin: 0;
            line-height: 1.6;
        }
        .step { 
            margin: 20px 0; 
            padding: 20px; 
            background: #2a2a2a; 
            border-left: 4px solid #666;
            border-radius: 4px;
        }
        .step.success { border-left-color: #4caf50; }
        .step.error { border-left-color: #f44336; }
        .step.running { border-left-color: #ff9800; }
        .step h3 { margin-top: 0; color: #64b5f6; }
        .code { 
            background: #0a0a0a; 
            padding: 10px; 
            border-radius: 4px;
            font-size: 12px;
            overflow-x: auto;
            margin: 10px 0;
        }
        .result { 
            margin-top: 10px; 
            padding: 10px; 
            background: #1a1a1a;
            border-radius: 4px;
        }
        .error-detail { color: #ff6b6b; }
        .success-detail { color: #69f0ae; }
        button { 
            background: #2196f3; 
            color: white; 
            border: none; 
            padding: 10px 20px; 
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #1976d2; }
        button:disabled { background: #666; cursor: not-allowed; }
    </style>
</head>
<body>
    <h1>ğŸ” æ®µéšçš„è¨ºæ–­ãƒ†ã‚¹ãƒˆ</h1>
    <p>å„ã‚¹ãƒ†ãƒƒãƒ—ã‚’é †ç•ªã«å®Ÿè¡Œã—ã¦ã€ã©ã“ã§å•é¡ŒãŒç™ºç”Ÿã—ã¦ã„ã‚‹ã‹ç‰¹å®šã—ã¾ã™ã€‚</p>
    
    <div class="controls">
        <button onclick="runAllTests()">ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ</button>
        <button onclick="location.reload()">ãƒªã‚»ãƒƒãƒˆ</button>
    </div>
    
    <!-- ã‚¹ãƒ†ãƒƒãƒ—1: åŸºæœ¬çš„ãªJavaScript -->
    <div id="step1" class="step">
        <h3>ã‚¹ãƒ†ãƒƒãƒ—1: åŸºæœ¬çš„ãªJavaScriptå®Ÿè¡Œ</h3>
        <div class="code">
console.log('Hello from JavaScript');
document.getElementById('step1-result').textContent = 'å®Ÿè¡ŒæˆåŠŸ';
        </div>
        <button onclick="runStep1()">å®Ÿè¡Œ</button>
        <div id="step1-result" class="result"></div>
    </div>
    
    <!-- ã‚¹ãƒ†ãƒƒãƒ—2: Three.js CDN -->
    <div id="step2" class="step">
        <h3>ã‚¹ãƒ†ãƒƒãƒ—2: Three.js CDNèª­ã¿è¾¼ã¿ç¢ºèª</h3>
        <div class="code">
if (typeof THREE !== 'undefined') {
    console.log('Three.js version:', THREE.REVISION);
} else {
    throw new Error('Three.js not loaded');
}
        </div>
        <button onclick="runStep2()">å®Ÿè¡Œ</button>
        <div id="step2-result" class="result"></div>
    </div>
    
    <!-- ã‚¹ãƒ†ãƒƒãƒ—3: ES6ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®åŸºæœ¬ -->
    <div id="step3" class="step">
        <h3>ã‚¹ãƒ†ãƒƒãƒ—3: ES6ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®åŸºæœ¬ãƒ†ã‚¹ãƒˆ</h3>
        <div class="code">
// ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œ
&lt;script type="module"&gt;
    console.log('ES6 module executed');
&lt;/script&gt;
        </div>
        <button onclick="runStep3()">å®Ÿè¡Œ</button>
        <div id="step3-result" class="result"></div>
    </div>
    
    <!-- ã‚¹ãƒ†ãƒƒãƒ—4: ç›¸å¯¾ãƒ‘ã‚¹ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚¤ãƒ³ãƒãƒ¼ãƒˆ -->
    <div id="step4" class="step">
        <h3>ã‚¹ãƒ†ãƒƒãƒ—4: ç›¸å¯¾ãƒ‘ã‚¹ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</h3>
        <div class="code">
import { testFunction } from './js/test-module.js';
testFunction();
        </div>
        <button onclick="runStep4()">å®Ÿè¡Œ</button>
        <div id="step4-result" class="result"></div>
    </div>
    
    <!-- ã‚¹ãƒ†ãƒƒãƒ—5: three-global.js -->
    <div id="step5" class="step">
        <h3>ã‚¹ãƒ†ãƒƒãƒ—5: three-global.js ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</h3>
        <div class="code">
import { THREE } from './js/three-global.js';
console.log('THREE object:', THREE);
        </div>
        <button onclick="runStep5()">å®Ÿè¡Œ</button>
        <div id="step5-result" class="result"></div>
    </div>
    
    <!-- ã‚¹ãƒ†ãƒƒãƒ—6: GameConfig.js -->
    <div id="step6" class="step">
        <h3>ã‚¹ãƒ†ãƒƒãƒ—6: GameConfig.js ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</h3>
        <div class="code">
import { GameConfig } from './js/config/GameConfig.js';
console.log('GameConfig:', GameConfig);
        </div>
        <button onclick="runStep6()">å®Ÿè¡Œ</button>
        <div id="step6-result" class="result"></div>
    </div>
    
    <!-- ã‚¹ãƒ†ãƒƒãƒ—7: Game.js -->
    <div id="step7" class="step">
        <h3>ã‚¹ãƒ†ãƒƒãƒ—7: Game.js ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</h3>
        <div class="code">
import { Game } from './js/core/Game.js';
console.log('Game class:', Game);
        </div>
        <button onclick="runStep7()">å®Ÿè¡Œ</button>
        <div id="step7-result" class="result"></div>
    </div>
    
    <!-- ã‚¹ãƒ†ãƒƒãƒ—8: ã‚²ãƒ¼ãƒ ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆ -->
    <div id="step8" class="step">
        <h3>ã‚¹ãƒ†ãƒƒãƒ—8: ã‚²ãƒ¼ãƒ ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆ</h3>
        <div class="code">
const game = new Game(GameConfig);
console.log('Game instance:', game);
        </div>
        <button onclick="runStep8()">å®Ÿè¡Œ</button>
        <div id="step8-result" class="result"></div>
    </div>
    
    <!-- Three.js CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <script>
        // çµæœè¡¨ç¤ºãƒ˜ãƒ«ãƒ‘ãƒ¼
        function showResult(stepId, success, message, detail = '') {
            const step = document.getElementById(stepId);
            const result = document.getElementById(stepId + '-result');
            
            step.className = `step ${success ? 'success' : 'error'}`;
            result.innerHTML = `
                <div class="${success ? 'success-detail' : 'error-detail'}">
                    ${success ? 'âœ…' : 'âŒ'} ${message}
                    ${detail ? '<br><small>' + detail + '</small>' : ''}
                </div>
            `;
        }
        
        // ã‚¹ãƒ†ãƒƒãƒ—1: åŸºæœ¬JavaScript
        function runStep1() {
            try {
                console.log('Hello from JavaScript');
                showResult('step1', true, 'åŸºæœ¬çš„ãªJavaScriptãŒæ­£å¸¸ã«å®Ÿè¡Œã•ã‚Œã¦ã„ã¾ã™');
            } catch (e) {
                showResult('step1', false, 'JavaScriptã‚¨ãƒ©ãƒ¼', e.message);
            }
        }
        
        // ã‚¹ãƒ†ãƒƒãƒ—2: Three.jsç¢ºèª
        function runStep2() {
            try {
                if (typeof THREE !== 'undefined') {
                    showResult('step2', true, `Three.js r${THREE.REVISION} ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã™`);
                } else {
                    throw new Error('Three.js ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
                }
            } catch (e) {
                showResult('step2', false, 'Three.jsèª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼', e.message);
            }
        }
        
        // ã‚¹ãƒ†ãƒƒãƒ—3: ES6ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŸºæœ¬
        function runStep3() {
            const script = document.createElement('script');
            script.type = 'module';
            script.textContent = `
                try {
                    console.log('ES6 module executed');
                    window.es6ModuleSuccess = true;
                } catch (e) {
                    window.es6ModuleError = e;
                }
            `;
            document.body.appendChild(script);
            
            setTimeout(() => {
                if (window.es6ModuleSuccess) {
                    showResult('step3', true, 'ES6ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã™');
                } else if (window.es6ModuleError) {
                    showResult('step3', false, 'ES6ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚¨ãƒ©ãƒ¼', window.es6ModuleError.message);
                } else {
                    showResult('step3', false, 'ES6ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒå®Ÿè¡Œã•ã‚Œã¾ã›ã‚“ã§ã—ãŸ');
                }
            }, 100);
        }
        
        // ã‚¹ãƒ†ãƒƒãƒ—4: ç›¸å¯¾ãƒ‘ã‚¹ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
        function runStep4() {
            const script = document.createElement('script');
            script.type = 'module';
            script.textContent = `
                try {
                    // ã¾ãšãƒ†ã‚¹ãƒˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½œæˆ
                    const testModule = \`
export function testFunction() {
    return 'Module imported successfully';
}
                    \`;
                    
                    // Blobã¨ã—ã¦ä½œæˆã—ã¦ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
                    const blob = new Blob([testModule], { type: 'application/javascript' });
                    const url = URL.createObjectURL(blob);
                    
                    import(url).then(module => {
                        const result = module.testFunction();
                        window.step4Success = result;
                    }).catch(e => {
                        window.step4Error = e;
                    });
                } catch (e) {
                    window.step4Error = e;
                }
            `;
            document.body.appendChild(script);
            
            setTimeout(() => {
                if (window.step4Success) {
                    showResult('step4', true, 'ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚¤ãƒ³ãƒãƒ¼ãƒˆãŒæ©Ÿèƒ½ã—ã¦ã„ã¾ã™', window.step4Success);
                } else if (window.step4Error) {
                    showResult('step4', false, 'ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚¨ãƒ©ãƒ¼', window.step4Error.message);
                } else {
                    showResult('step4', false, 'ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚¤ãƒ³ãƒãƒ¼ãƒˆãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸ');
                }
            }, 500);
        }
        
        // ã‚¹ãƒ†ãƒƒãƒ—5: three-global.js
        function runStep5() {
            const script = document.createElement('script');
            script.type = 'module';
            script.textContent = `
                import('./js/three-global.js').then(module => {
                    if (module.THREE) {
                        window.step5Success = true;
                        console.log('THREE from module:', module.THREE);
                    } else {
                        window.step5Error = new Error('THREE not exported from module');
                    }
                }).catch(e => {
                    window.step5Error = e;
                    console.error('Import error:', e);
                });
            `;
            document.body.appendChild(script);
            
            setTimeout(() => {
                if (window.step5Success) {
                    showResult('step5', true, 'three-global.js ãŒæ­£å¸¸ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚Œã¾ã—ãŸ');
                } else if (window.step5Error) {
                    showResult('step5', false, 'three-global.js ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚¨ãƒ©ãƒ¼', window.step5Error.message);
                } else {
                    showResult('step5', false, 'three-global.js ã‚¤ãƒ³ãƒãƒ¼ãƒˆãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸ');
                }
            }, 1000);
        }
        
        // ã‚¹ãƒ†ãƒƒãƒ—6: GameConfig.js
        function runStep6() {
            const script = document.createElement('script');
            script.type = 'module';
            script.textContent = `
                import('./js/config/GameConfig.js').then(module => {
                    if (module.GameConfig) {
                        window.step6Success = module.GameConfig.GAME.NAME;
                        console.log('GameConfig:', module.GameConfig);
                    } else {
                        window.step6Error = new Error('GameConfig not exported from module');
                    }
                }).catch(e => {
                    window.step6Error = e;
                    console.error('Import error:', e);
                });
            `;
            document.body.appendChild(script);
            
            setTimeout(() => {
                if (window.step6Success) {
                    showResult('step6', true, 'GameConfig ãŒæ­£å¸¸ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚Œã¾ã—ãŸ', `ã‚²ãƒ¼ãƒ å: ${window.step6Success}`);
                } else if (window.step6Error) {
                    showResult('step6', false, 'GameConfig ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚¨ãƒ©ãƒ¼', window.step6Error.message);
                } else {
                    showResult('step6', false, 'GameConfig ã‚¤ãƒ³ãƒãƒ¼ãƒˆãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸ');
                }
            }, 1000);
        }
        
        // ã‚¹ãƒ†ãƒƒãƒ—7: Game.js
        function runStep7() {
            const script = document.createElement('script');
            script.type = 'module';
            script.textContent = `
                import('./js/core/Game.js').then(module => {
                    if (module.Game && typeof module.Game === 'function') {
                        window.step7Success = true;
                        console.log('Game class:', module.Game);
                    } else {
                        window.step7Error = new Error('Game class not properly exported');
                    }
                }).catch(e => {
                    window.step7Error = e;
                    console.error('Import error:', e);
                });
            `;
            document.body.appendChild(script);
            
            setTimeout(() => {
                if (window.step7Success) {
                    showResult('step7', true, 'Game ã‚¯ãƒ©ã‚¹ãŒæ­£å¸¸ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚Œã¾ã—ãŸ');
                } else if (window.step7Error) {
                    showResult('step7', false, 'Game ã‚¯ãƒ©ã‚¹ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚¨ãƒ©ãƒ¼', window.step7Error.message);
                } else {
                    showResult('step7', false, 'Game ã‚¯ãƒ©ã‚¹ã‚¤ãƒ³ãƒãƒ¼ãƒˆãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸ');
                }
            }, 2000);
        }
        
        // ã‚¹ãƒ†ãƒƒãƒ—8: ã‚²ãƒ¼ãƒ ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹
        function runStep8() {
            const script = document.createElement('script');
            script.type = 'module';
            script.textContent = `
                Promise.all([
                    import('./js/config/GameConfig.js'),
                    import('./js/core/Game.js')
                ]).then(([configModule, gameModule]) => {
                    const game = new gameModule.Game(configModule.GameConfig);
                    window.step8Success = game;
                    console.log('Game instance created:', game);
                }).catch(e => {
                    window.step8Error = e;
                    console.error('Game creation error:', e);
                });
            `;
            document.body.appendChild(script);
            
            setTimeout(() => {
                if (window.step8Success) {
                    showResult('step8', true, 'ã‚²ãƒ¼ãƒ ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒæ­£å¸¸ã«ä½œæˆã•ã‚Œã¾ã—ãŸ');
                } else if (window.step8Error) {
                    showResult('step8', false, 'ã‚²ãƒ¼ãƒ ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆã‚¨ãƒ©ãƒ¼', window.step8Error.message);
                } else {
                    showResult('step8', false, 'ã‚²ãƒ¼ãƒ ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸ');
                }
            }, 3000);
        }
        
        // ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
        async function runAllTests() {
            runStep1();
            await new Promise(r => setTimeout(r, 500));
            
            runStep2();
            await new Promise(r => setTimeout(r, 500));
            
            runStep3();
            await new Promise(r => setTimeout(r, 500));
            
            runStep4();
            await new Promise(r => setTimeout(r, 1000));
            
            runStep5();
            await new Promise(r => setTimeout(r, 1500));
            
            runStep6();
            await new Promise(r => setTimeout(r, 1500));
            
            runStep7();
            await new Promise(r => setTimeout(r, 2500));
            
            runStep8();
        }
        
        // ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
        window.addEventListener('error', (e) => {
            console.error('Global error:', e);
        });
        
        window.addEventListener('unhandledrejection', (e) => {
            console.error('Unhandled rejection:', e.reason);
        });
    </script>
</body>
</html>